import time
import datetime
import picamera

def time_check():
	""" Checks whether the time is within a given timeframe. """
	current_time = datetime.datetime.now().time()
	start = datetime.time(07+1)
	end = datetime.time(23+1)
	return start <= current_time <= end
	
def capture_photo():
	""" Takes a photo and stores it with the time taken as the name."""
	time_now = datetime.datetime.now().time()
	with picamera.PiCamera() as camera:
		time.sleep(2)
		print "Taking photo"
		camera.capture('/home/pi/timelapse/dtu/im%s.jpg' % time_now)
		print "Photo taken at %s " % time_now

# Taking pictures in the given timeframe.
while True:
	if time_check():
		capture_photo()
	else:
		"Sleep for 30 minutes."
		time.sleep(1800)

